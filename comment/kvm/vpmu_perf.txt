vPMU应该不准确. 对于VM的event在KVM用perf_event_create_kernel_counter()创建绑定current (vcpu)的event.
然后把event在KVM side调度. 所以profile的是vcpu thread???

intel_pmu_add_event
event_sched_in.isra.101
group_sched_in
ctx_sched_in
perf_event_sched_in
ctx_resched
__perf_install_in_context
remote_function
generic_exec_single
smp_call_function_single
task_function_call
perf_install_in_context
perf_event_create_kernel_counter
pmc_reprogram_counter
reprogram_fixed_counter
reprogram_counter
kvm_pmu_handle_event
__dta_vcpu_enter_guest_1387
kvm_arch_vcpu_ioctl_run
__dta_kvm_vcpu_ioctl_656
do_vfs_ioctl
sys_ioctl
do_syscall_64
entry_SYSCALL_64_after_hwframe

intel_pmu_add_event
event_sched_in.isra.101
group_sched_in
ctx_sched_in
perf_event_sched_in
ctx_resched
__perf_install_in_context
remote_function
generic_exec_single
smp_call_function_single
task_function_call
perf_install_in_context
perf_event_create_kernel_counter
pmc_reprogram_counter
reprogram_fixed_counter
reprogram_counter
intel_pmu_set_msr
kvm_pmu_set_msr
kvm_set_msr_common
vmx_set_msr
kvm_set_msr
__dta_handle_wrmsr_188
__dta_vmx_handle_exit_302
__dta_vcpu_enter_guest_1387
kvm_arch_vcpu_ioctl_run
__dta_kvm_vcpu_ioctl_656
do_vfs_ioctl
sys_ioctl
do_syscall_64
entry_SYSCALL_64_after_hwframe

intel_pmu_add_event
event_sched_in.isra.101
group_sched_in
ctx_sched_in
perf_event_sched_in
__perf_event_task_sched_in
finish_task_switch
__sched_text_start
schedule
kvm_vcpu_block
kvm_arch_vcpu_ioctl_run
__dta_kvm_vcpu_ioctl_656
do_vfs_ioctl
sys_ioctl
do_syscall_64
entry_SYSCALL_64_after_hwframe
